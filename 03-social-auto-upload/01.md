conda create -n social-auto-upload python=3.10 conda activate social-auto-upload # æŒ‚è½½æ¸…åé•œåƒ or å‘½ä»¤è¡Œä»£ç† pip install -r requirements.txt ä½¿ç”¨uvè¿›è¡Œå®‰è£…





æˆ‘æ¥å¸®ä½ ä¼˜åŒ–è¿™ä¸ªæµç¨‹ï¼Œä½¿ç”¨ `uv` æ¥æ›¿ä»£ä¼ ç»Ÿçš„ `pip` å®‰è£…ä¼šæ›´é«˜æ•ˆã€‚ä»¥ä¸‹æ˜¯æ”¹è¿›åçš„æ–¹æ¡ˆï¼š

## æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ uv çš„æ¨èæ–¹å¼ï¼ˆæœ€å¿«ï¼‰

bash

```
# 1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆuv æ¨èä½¿ç”¨è‡ªå·±çš„è™šæ‹Ÿç¯å¢ƒç®¡ç†ï¼‰
uv venv social-auto-upload --python 3.10

# 2. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows:
social-auto-upload\Scripts\activate
# Linux/Mac:
source social-auto-upload/bin/activate

# 3. å®‰è£…ä¾èµ–ï¼ˆuv ä¼šè‡ªåŠ¨ä½¿ç”¨å›½å†…é•œåƒåŠ é€Ÿï¼‰
uv pip install -r requirements.txt
```



## æ–¹æ¡ˆäºŒï¼šå¦‚æœåšæŒä½¿ç”¨ conda

bash

```
# 1. åˆ›å»º conda ç¯å¢ƒ
conda create -n social-auto-upload python=3.10 -y
conda activate social-auto-upload

# 2. å®‰è£… uvï¼ˆå¦‚æœè¿˜æ²¡æœ‰å®‰è£…ï¼‰
# å…¨å±€å®‰è£… uvï¼ˆæ¨èï¼‰ï¼š
pip install uv
# æˆ–è€…ä½¿ç”¨ condaï¼š
conda install conda-forge::uv

# 3. ä½¿ç”¨ uv å®‰è£…ä¾èµ–
uv pip install -r requirements.txt
```



## æ–¹æ¡ˆä¸‰ï¼šä½¿ç”¨ uv åˆ›å»ºå¹¶å®‰è£…ä¸€æ­¥åˆ°ä½

bash

```
# ä½¿ç”¨ uv åˆ›å»ºç¯å¢ƒå¹¶å®‰è£…æ‰€æœ‰ä¾èµ–
uv init social-auto-upload --python 3.10
cd social-auto-upload
uv add -r requirements.txt
```



## ä»£ç†é…ç½®ï¼ˆå¦‚æœéœ€è¦ï¼‰

### ä¸º uv é…ç½®é•œåƒæºï¼š

bash

```
# æ¸…åé•œåƒ
uv config set pip.index-url "https://pypi.tuna.tsinghua.edu.cn/simple"

# é˜¿é‡Œäº‘é•œåƒ
uv config set pip.index-url "https://mirrors.aliyun.com/pypi/simple"
```



### å‘½ä»¤è¡Œä»£ç†ï¼š

bash

```
# Windowsï¼ˆPowerShellï¼‰
$env:HTTP_PROXY="http://127.0.0.1:7890"
$env:HTTPS_PROXY="http://127.0.0.1:7890"

# Linux/Mac
export HTTP_PROXY=http://127.0.0.1:7890
export HTTPS_PROXY=http://127.0.0.1:7890
```



## å®Œæ•´çš„è‡ªåŠ¨åŒ–è„šæœ¬

åˆ›å»º `setup.sh`ï¼ˆLinux/Macï¼‰æˆ– `setup.ps1`ï¼ˆWindowsï¼‰ï¼š

### setup.sh

bash

```
#!/bin/bash

# æ£€æŸ¥æ˜¯å¦å®‰è£… uv
if ! command -v uv &> /dev/null; then
    echo "æ­£åœ¨å®‰è£… uv..."
    curl -LsSf https://astral.sh/uv/install.sh | sh
fi

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
echo "åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ..."
uv venv social-auto-upload --python 3.10

# æ¿€æ´»ç¯å¢ƒ
echo "æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ..."
source social-auto-upload/bin/activate

# å®‰è£…ä¾èµ–
echo "å®‰è£…ä¾èµ–..."
uv pip install -r requirements.txt

echo "å®‰è£…å®Œæˆï¼ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¿€æ´»ç¯å¢ƒï¼š"
echo "source social-auto-upload/bin/activate"
```



### setup.ps1ï¼ˆWindows PowerShellï¼‰

powershell

```
# æ£€æŸ¥æ˜¯å¦å®‰è£… uv
if (!(Get-Command uv -ErrorAction SilentlyContinue)) {
    Write-Host "æ­£åœ¨å®‰è£… uv..."
    winget install --id=astral.uv
}

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
Write-Host "åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ..."
uv venv social-auto-upload --python 3.10

# æ¿€æ´»ç¯å¢ƒ
Write-Host "æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ..."
.\social-auto-upload\Scripts\Activate.ps1

# å®‰è£…ä¾èµ–
Write-Host "å®‰è£…ä¾èµ–..."
uv pip install -r requirements.txt

Write-Host "å®‰è£…å®Œæˆï¼"
```



## ä¼˜åŠ¿å¯¹æ¯”

| å·¥å…·       | å®‰è£…é€Ÿåº¦ | ç¼“å­˜æœºåˆ¶ | ä¾èµ–è§£æ | æ¨èåº¦ |
| :--------- | :------- | :------- | :------- | :----- |
| pip        | æ…¢       | ä¸€èˆ¬     | æ…¢       | â­â­     |
| pip + é•œåƒ | ä¸­       | ä¸€èˆ¬     | æ…¢       | â­â­â­    |
| **uv**     | **æå¿«** | **ä¼˜ç§€** | **æå¿«** | â­â­â­â­â­  |
| conda      | æ…¢       | å¥½       | æ…¢       | â­â­     |

**å»ºè®®**ï¼šç›´æ¥ä½¿ç”¨æ–¹æ¡ˆä¸€çš„ uv åŸç”Ÿæ–¹å¼ï¼Œå®ƒæ˜¯ç›®å‰ Python åŒ…ç®¡ç†æœ€å¿«çš„å·¥å…·ã€‚











playwright æ˜¯ä»€ä¹ˆ





**Playwright** æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„æµè§ˆå™¨è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ï¼Œç”±å¾®è½¯å¼€å‘å¹¶å¼€æºã€‚å®ƒè¿œè¿œè¶…å‡ºäº†ä¼ ç»Ÿ"æµ‹è¯•æ¡†æ¶"çš„èŒƒç•´ï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ªå¼ºå¤§çš„**æµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·**ï¼Œå¯ä»¥ç”¨äºå¤šç§ç”¨é€”ã€‚

## æ ¸å¿ƒç‰¹ç‚¹

### 1. **å¤šæµè§ˆå™¨æ”¯æŒ**

python

```
# æ”¯æŒæ‰€æœ‰ä¸»æµæµè§ˆå™¨
from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    # éƒ½ä½¿ç”¨ç›¸åŒçš„ API
    chromium = p.chromium.launch()  # Chrome/Edge
    firefox = p.firefox.launch()    # Firefox
    webkit = p.webkit.launch()      # Safari
```



### 2. **ä¸»è¦åŠŸèƒ½**

#### **è‡ªåŠ¨åŒ–ç½‘é¡µæ“ä½œ**

python

```
# æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œ
page.goto("https://example.com")
page.click("button.submit")
page.fill("#username", "myuser")
page.type("#password", "password123")
page.press("#login", "Enter")
```



#### **ç½‘ç»œè¯·æ±‚æ‹¦æˆª**

python

```
# ç›‘å¬å’Œä¿®æ”¹ç½‘ç»œè¯·æ±‚
page.route("**/*.png", lambda route: route.abort())  # é˜»æ­¢å›¾ç‰‡åŠ è½½
page.on("request", lambda request: print(request.url))
page.on("response", lambda response: print(response.status))
```



#### **å¤šç§å†…å®¹å¤„ç†**

python

```
# æˆªå›¾å’ŒPDF
page.screenshot(path="screenshot.png", full_page=True)
page.pdf(path="page.pdf")

# è·å–é¡µé¢å†…å®¹
content = page.content()
text = page.inner_text("body")
html = page.inner_html("#content")
```



#### **ç­‰å¾…ç­–ç•¥**

python

```
# å¤šç§ç­‰å¾…æ–¹å¼
page.wait_for_selector(".loaded")           # ç­‰å¾…å…ƒç´ å‡ºç°
page.wait_for_load_state("networkidle")     # ç­‰å¾…ç½‘ç»œç©ºé—²
page.wait_for_function("window.dataLoaded") # ç­‰å¾…JSå‡½æ•°
page.wait_for_timeout(3000)                 # å›ºå®šç­‰å¾…
```



## ä¸»è¦åº”ç”¨åœºæ™¯

### 1. **è‡ªåŠ¨åŒ–æµ‹è¯•**ï¼ˆåŸå§‹ç›®çš„ï¼‰

python

```
# ç«¯åˆ°ç«¯æµ‹è¯•
def test_login():
    page.goto("/login")
    page.fill("#email", "test@example.com")
    page.fill("#password", "password123")
    page.click("button[type=submit]")
    assert page.locator(".welcome-message").is_visible()
```



### 2. **ç½‘é¡µçˆ¬è™«/æ•°æ®é‡‡é›†**

python

```
# çˆ¬å–åŠ¨æ€ç½‘é¡µï¼ˆAJAX/SPAï¼‰
page.goto("https://social-media.com")
page.wait_for_selector(".posts")

posts = []
for post in page.locator(".post").all():
    posts.append({
        "title": post.locator(".title").inner_text(),
        "content": post.locator(".content").inner_html(),
        "image": post.locator("img").get_attribute("src")
    })
```



### 3. **ç¤¾äº¤åª’ä½“è‡ªåŠ¨åŒ–**ï¼ˆä½ çš„åœºæ™¯ï¼‰

python

```
# è‡ªåŠ¨å‘å¸ƒå†…å®¹åˆ°ç¤¾äº¤åª’ä½“
async def post_to_twitter(content, image_path=None):
    async with async_playwright() as p:
        browser = await p.chromium.launch(headless=False)  # æ˜¾ç¤ºæµè§ˆå™¨
        page = await browser.new_page()
        
        # ç™»å½•
        await page.goto("https://twitter.com/login")
        await page.fill('input[name="username"]', "your_username")
        # ... ç™»å½•æµç¨‹
        
        # å‘å¸ƒå†…å®¹
        await page.click('[data-testid="tweetButtonInline"]')
        await page.fill('[data-testid="tweetTextarea"]', content)
        
        if image_path:
            await page.set_input_files('input[type="file"]', image_path)
            await page.wait_for_selector('[data-testid="attachedImage"]')
        
        await page.click('[data-testid="tweetButton"]')
        await browser.close()
```



### 4. **ç½‘é¡µæˆªå›¾å’Œç›‘æ§**

python

```
# å®šæœŸæˆªå›¾ç›‘æ§
def monitor_website(url):
    with sync_playwright() as p:
        browser = p.chromium.launch()
        page = browser.new_page()
        page.goto(url)
        
        # æˆªå›¾ä¸åŒè§†å£
        page.set_viewport_size({"width": 1920, "height": 1080})
        page.screenshot(path="desktop.png")
        
        page.set_viewport_size({"width": 375, "height": 667})
        page.screenshot(path="mobile.png")
```



### 5. **æ€§èƒ½æµ‹è¯•å’Œåˆ†æ**

python

```
# æ€§èƒ½ç›‘æ§
page.goto(url)

# è·å–æ€§èƒ½æŒ‡æ ‡
timing = page.evaluate("JSON.stringify(window.performance.timing)")
resources = page.evaluate("""
    () => performance.getEntriesByType('resource')
        .map(r => ({name: r.name, duration: r.duration}))
""")
```



## ç›¸æ¯” Selenium çš„ä¼˜åŠ¿

| ç‰¹æ€§                | Playwright            | Selenium             |
| :------------------ | :-------------------- | :------------------- |
| **é€Ÿåº¦**            | âš¡ å¿«ï¼ˆç›´æ¥ CDP è¿æ¥ï¼‰ | æ…¢ï¼ˆWebDriver åè®®ï¼‰ |
| **API è®¾è®¡**        | ğŸ¯ ç°ä»£åŒ–ã€ç›´è§‚        | è¾ƒä¼ ç»Ÿ               |
| **è‡ªåŠ¨ç­‰å¾…**        | âœ… å†…ç½®æ™ºèƒ½ç­‰å¾…        | âŒ éœ€è¦æ‰‹åŠ¨           |
| **å¤šæµè§ˆå™¨**        | âœ… ç»Ÿä¸€ API            | âš ï¸ ä¸åŒæµè§ˆå™¨ä¸åŒ     |
| **ç§»åŠ¨ç«¯**          | âœ… è®¾å¤‡æ¨¡æ‹Ÿ            | âš ï¸ æœ‰é™æ”¯æŒ           |
| **å½•åˆ¶å·¥å…·**        | âœ… playwright codegen  | âŒ ç¬¬ä¸‰æ–¹å·¥å…·         |
| **TypeScript æ”¯æŒ** | âœ… ä¼˜ç§€                | âš ï¸ ä¸€èˆ¬               |

## å®‰è£…å’Œä½¿ç”¨

bash

```
# å®‰è£… playwright
pip install playwright

# å®‰è£…æµè§ˆå™¨ï¼ˆéœ€è¦è¿è¡Œä¸€æ¬¡ï¼‰
playwright install  # å®‰è£…æ‰€æœ‰æµè§ˆå™¨
playwright install chromium  # åªå®‰è£… Chromium

# å½•åˆ¶å·¥å…·ï¼ˆè‡ªåŠ¨ç”Ÿæˆä»£ç ï¼‰
playwright codegen https://example.com
```



## åœ¨ä½ çš„ç¤¾äº¤è‡ªåŠ¨ä¸Šä¼ é¡¹ç›®ä¸­çš„åº”ç”¨

python

```
# ç¤ºä¾‹ï¼šè‡ªåŠ¨å‘å¸ƒåˆ°å¤šä¸ªå¹³å°
class SocialAutoUpload:
    def __init__(self):
        self.playwright = sync_playwright().start()
        self.browser = self.playwright.chromium.launch(headless=False)
        
    async def upload_to_instagram(self, image_path, caption):
        """ä¸Šä¼ åˆ° Instagram"""
        page = await self.browser.new_page()
        # Instagram ä¸Šä¼ é€»è¾‘...
        
    async def upload_to_tiktok(self, video_path, description):
        """ä¸Šä¼ åˆ° TikTok"""
        page = await self.browser.new_page()
        # TikTok ä¸Šä¼ é€»è¾‘...
        
    async def upload_to_youtube(self, video_path, title, description):
        """ä¸Šä¼ åˆ° YouTube"""
        page = await self.browser.new_page()
        # YouTube ä¸Šä¼ é€»è¾‘...
        
    def close(self):
        self.browser.close()
        self.playwright.stop()
```



## æ³¨æ„äº‹é¡¹

1. **åçˆ¬è™«æœºåˆ¶**ï¼šå¾ˆå¤šç½‘ç«™ä¼šæ£€æµ‹ Playwright

   python

   ```
   # éœ€è¦éšè—è‡ªåŠ¨åŒ–ç‰¹å¾
   context = browser.new_context(
       user_agent="Mozilla/5.0...",
       viewport={"width": 1920, "height": 1080}
   )
   ```

   

2. **éªŒè¯ç å¤„ç†**ï¼šéœ€è¦äººå·¥å¹²é¢„æˆ–ä½¿ç”¨ç¬¬ä¸‰æ–¹æœåŠ¡

3. **ç™»å½•çŠ¶æ€ä¿æŒ**ï¼šä½¿ç”¨ cookie æŒä¹…åŒ–

   python

   ```
   # ä¿å­˜å’ŒåŠ è½½ cookies
   context.storage_state(path="auth.json")
   context = browser.new_context(storage_state="auth.json")
   ```

   

Playwright ç‰¹åˆ«é€‚åˆä½ çš„**social-auto-upload**é¡¹ç›®ï¼Œå› ä¸ºå®ƒèƒ½å¾ˆå¥½åœ°å¤„ç†ç°ä»£ç½‘é¡µåº”ç”¨ï¼ˆReactã€Vueã€Angularç­‰ï¼‰ï¼Œè€Œä¸”å¯¹äºéœ€è¦ç™»å½•ã€æ–‡ä»¶ä¸Šä¼ ã€å¤æ‚äº¤äº’çš„ç¤¾äº¤åª’ä½“å¹³å°éå¸¸æœ‰æ•ˆã€‚

æœ¬å›ç­”ç”± AI ç”Ÿæˆï¼Œå†…å®¹ä»…ä¾›å‚è€ƒï¼Œè¯·ä»”ç»†ç”„åˆ«ã€‚











CDP å…¥é—¨





# **Chrome DevTools Protocol (CDP) å…¥é—¨æŒ‡å—**

CDP æ˜¯ä¸€ä¸ªå¼ºå¤§çš„**æµè§ˆå™¨è°ƒè¯•åè®®**ï¼Œè®©ä½ å¯ä»¥ç¨‹åºåŒ–åœ°æ§åˆ¶ Chrome/Chromium æµè§ˆå™¨ã€‚

## ğŸŒŸ ä»€ä¹ˆæ˜¯ CDPï¼Ÿ

**CDP æ˜¯ Chrome DevTools èƒŒåçš„é€šä¿¡åè®®**ï¼Œå…è®¸å¤–éƒ¨å·¥å…·ï¼š

- è¿œç¨‹æ§åˆ¶æµè§ˆå™¨
- æ£€æŸ¥/ä¿®æ”¹ DOMã€CSSã€JS
- ç›‘æ§ç½‘ç»œè¯·æ±‚
- æ‰§è¡Œ JavaScript
- æ•è·æ€§èƒ½æ•°æ®
- æ¨¡æ‹Ÿè®¾å¤‡/ç½‘ç»œæ¡ä»¶

## ğŸ”Œ CDP çš„ä¸‰ç§è¿æ¥æ–¹å¼

### 1. **WebSocket è¿æ¥**ï¼ˆæœ€å¸¸ç”¨ï¼‰

javascript

```
// å¯åŠ¨ Chrome å¹¶å¯ç”¨è¿œç¨‹è°ƒè¯•
chrome.exe --remote-debugging-port=9222

// WebSocket åœ°å€ï¼šws://localhost:9222/devtools/browser/[id]
```



### 2. **HTTP æ¥å£**

bash

```
# è·å–æ‰€æœ‰æ ‡ç­¾é¡µä¿¡æ¯
curl http://localhost:9222/json

# åˆ›å»ºæ–°æ ‡ç­¾é¡µ
curl -X POST http://localhost:9222/json/new

# å…³é—­æ ‡ç­¾é¡µ
curl -X POST http://localhost:9222/json/close/{id}
```



### 3. **é€šè¿‡åº“ä½¿ç”¨**ï¼ˆæ¨èï¼‰

python

```
# Python - ä½¿ç”¨ pyppeteer æˆ– playwright
import asyncio
from pyppeteer import connect

async def main():
    # è¿æ¥åˆ°è¿è¡Œä¸­çš„æµè§ˆå™¨
    browser = await connect(browserWSEndpoint='ws://localhost:9222/devtools/browser/xxx')
    page = await browser.newPage()
    await page.goto('https://example.com')
```



## ğŸ“¦ æ ¸å¿ƒæ¦‚å¿µ

### **ä¼šè¯ (Session)**

javascript

```
// CDP åŸºäºä¼šè¯æ¨¡å‹
{
  "id": 1,                    // ä¼šè¯ID
  "method": "Page.navigate",  // è¦è°ƒç”¨çš„æ–¹æ³•
  "params": {                 // å‚æ•°
    "url": "https://example.com"
  }
}
```



### **é¢†åŸŸ (Domains)**

CDP æŒ‰åŠŸèƒ½åˆ†ä¸ºå¤šä¸ªé¢†åŸŸï¼š

| é¢†åŸŸ        | åŠŸèƒ½       | å¸¸ç”¨æ–¹æ³•                                           |
| :---------- | :--------- | :------------------------------------------------- |
| **Browser** | æµè§ˆå™¨æ§åˆ¶ | `Browser.getVersion()`, `Browser.close()`          |
| **Page**    | é¡µé¢æ“ä½œ   | `Page.navigate()`, `Page.screenshot()`             |
| **Runtime** | JS æ‰§è¡Œ    | `Runtime.evaluate()`, `Runtime.callFunctionOn()`   |
| **Network** | ç½‘ç»œç›‘æ§   | `Network.enable()`, `Network.requestWillBeSent`    |
| **DOM**     | DOM æ“ä½œ   | `DOM.getDocument()`, `DOM.querySelector()`         |
| **CSS**     | æ ·å¼æ“ä½œ   | `CSS.getStyleSheets()`, `CSS.setStyleTexts()`      |
| **Target**  | ç›®æ ‡ç®¡ç†   | `Target.createTarget()`, `Target.attachToTarget()` |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. **å¯åŠ¨ Chrome å¹¶å¯ç”¨ CDP**

bash

```
# Windows
chrome.exe --remote-debugging-port=9222 --user-data-dir="C:\chrome_debug"

# Mac
/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --remote-debugging-port=9222

# Linux
google-chrome --remote-debugging-port=9222

# Headless æ¨¡å¼
chrome --headless --remote-debugging-port=9222 --disable-gpu
```



### 2. **åŸºç¡€ Python ç¤ºä¾‹**

python

```
import json
import websocket

# 1. é¦–å…ˆè·å– WebSocket URL
import requests
response = requests.get('http://localhost:9222/json')
debugger_info = response.json()[0]
ws_url = debugger_info['webSocketDebuggerUrl']

# 2. è¿æ¥ WebSocket
ws = websocket.WebSocket()
ws.connect(ws_url)

# 3. å¯¼èˆªåˆ°ç½‘é¡µ
command = {
    "id": 1,
    "method": "Page.navigate",
    "params": {"url": "https://example.com"}
}
ws.send(json.dumps(command))

# 4. æ¥æ”¶å“åº”
result = ws.recv()
print(json.loads(result))

# 5. æˆªå›¾
screenshot_cmd = {
    "id": 2,
    "method": "Page.captureScreenshot",
    "params": {"format": "png", "fromSurface": True}
}
ws.send(json.dumps(screenshot_cmd))

response = json.loads(ws.recv())
if 'result' in response:
    import base64
    image_data = base64.b64decode(response['result']['data'])
    with open('screenshot.png', 'wb') as f:
        f.write(image_data)

ws.close()
```



## ğŸ”§ å¸¸ç”¨æ“ä½œç¤ºä¾‹

### **æ‰§è¡Œ JavaScript**

python

```
command = {
    "id": 3,
    "method": "Runtime.evaluate",
    "params": {
        "expression": """
            // è·å–é¡µé¢æ ‡é¢˜
            document.title;
            
            // æˆ–è€…å¤æ‚æ“ä½œ
            const data = [];
            document.querySelectorAll('.item').forEach(el => {
                data.push({
                    text: el.innerText,
                    href: el.href
                });
            });
            data;
        """,
        "returnByValue": True  # è¿”å›å®é™…å€¼è€Œä¸æ˜¯å¼•ç”¨
    }
}
```



### **ç›‘å¬ç½‘ç»œè¯·æ±‚**

python

```
# å¯ç”¨ç½‘ç»œåŸŸ
ws.send(json.dumps({
    "id": 4,
    "method": "Network.enable"
}))

# ç›‘å¬è¯·æ±‚äº‹ä»¶
ws.send(json.dumps({
    "id": 5,
    "method": "Network.requestWillBeSent",
    "params": {
        "maxTotalBufferSize": 0,
        "maxResourceBufferSize": 0
    }
}))

# æŒç»­ç›‘å¬
while True:
    response = json.loads(ws.recv())
    if 'method' in response:
        if response['method'] == 'Network.requestWillBeSent':
            url = response['params']['request']['url']
            print(f"è¯·æ±‚: {url}")
```



### **DOM æ“ä½œ**

python

```
# è·å–æ•´ä¸ª DOM
ws.send(json.dumps({
    "id": 6,
    "method": "DOM.getDocument",
    "params": {"depth": -1
```